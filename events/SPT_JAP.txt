add_namespace = spt_jap
add_namespace = spt_jap_news

#country_event = {
#	id = spt_jap.1
#	title = spt_jap.1.t
#	desc = spt_jap.1.desc
#	is_triggered_only = yes
#	option = {
#		name = spt_jap.1.a
#	}
#}


country_event = { #hidden event to spawn militia units periodically
	id = spt_jap.2
	title = spt_jap.2.t
	desc = spt_jap.2.desc
	is_triggered_only = yes
	timeout_days = 1
	hidden = yes
	picture = GFX_report_event_chinese_soldiers

	immediate = {
		country_event = {
			id = spt_jap.2
			days = 20
		}

		for_loop_effect = {
			start = 0
			end = 6
			add = 1

			SPT_JAP_spawn_militia = yes

		}


	}

	option = {
		name = spt_jap.2.a
	}
}


#German Production Engineers Inspect Our Methods
country_event = { 
	id = spt_jap.3
	title = spt_jap.3.t
	desc = spt_jap.3.desc
	is_triggered_only = yes
	timeout_days = 14
	picture = GFX_report_event_generic_factory

	immediate = {

	}

	option = { #Maintain the japanese model
		name = spt_jap.3.a

		custom_effect_tooltip = SPT_JAP_zaibatsu_mod_header_tt
		add_to_variable = {
			SPT_JAP_zai_production_factory_start_efficiency_factor = 0.05
			tooltip = production_factory_start_efficiency_factor_tt
		}
	}

	option = { #Take their advice
		name = spt_jap.3.b

		custom_effect_tooltip = SPT_JAP_zaibatsu_mod_header_tt
		add_to_variable = {
			SPT_JAP_zai_production_factory_efficiency_gain_factor = 0.1
			tooltip = production_factory_efficiency_gain_factor_tt
		}
		add_to_variable = {
			SPT_JAP_zai_political_power_gain = -0.05
			tooltip = political_power_gain_tt
		}
		hidden_effect = {
			add_ideas = SPT_JAP_took_german_advice
		}
	}
}

#Grain markets in china cause inflation
country_event = { 
	id = spt_jap.4
	title = spt_jap.4.t
	desc = spt_jap.4.desc
	is_triggered_only = yes #this is triggered by china capitulating
	timeout_days = 14
	picture = GFX_report_event_japanese_parade

	immediate = { #effect applied immediately to avoid cheese
		add_to_variable = {
			var = JAP.spt_jap_cg_increase_tracker
			value = 0.005
		}
		hidden_effect = {
			add_ideas = SPT_JAP_grain_market_inflation_active
		}
	}

	option = { #Warns the player that shit sucks now
		name = spt_jap.4.a
		custom_effect_tooltip = SPT_JAP_cg_expected_timed_increase_up_tt
	}
}

#Solving the chinese grain market problem
country_event = { 
	id = spt_jap.5
	title = spt_jap.5.t
	desc = spt_jap.5.desc
	is_triggered_only = yes
	timeout_days = 14
	picture = GFX_report_event_japanese_parade

	immediate = { 
		
	}

	option = { #Seize the grain
		name = spt_jap.5.a
		add_stability = -0.05

		add_to_variable = {
			var = SPT_JAP_eco_pressure_consumer_goods_expected_value
			value = -0.03
			tooltip = SPT_JAP_cg_expected_tt
		}
		hidden_effect = {
			if = { 
				limit = {
					check_variable = {
						var = SPT_JAP_eco_pressure_consumer_goods_expected_value
						value = 0.0
						compare = less_than
					}
				}
				set_variable = {
					var = SPT_JAP_eco_pressure_consumer_goods_expected_value
					value = 0.0
				}
			}
		}
	}

	option = { #Eat a debuff now but stop getting the increased cg
		name = spt_jap.5.b
		custom_effect_tooltip = SPT_JAP_cg_expected_timed_increase_down_tt
		hidden_effect = {
			add_to_variable = {
				var = JAP.spt_jap_cg_increase_tracker
				value = -0.005
			}
			remove_ideas = SPT_JAP_grain_market_inflation_active

		}
		custom_effect_tooltip = SPT_JAP_whitespace_tt
		custom_effect_tooltip = SPT_JAP_eco_pressure_modify_header_tt
		add_to_variable = {
			var = SPT_JAP_eco_pressure_consumer_goods_expected_value
			value = 0.015
			tooltip = SPT_JAP_cg_expected_tt
		}
	}
}

#Hidden event to trigger an increase in eco pressure later
country_event = { 
	id = spt_jap.6
	title = spt_jap.6.t
	desc = spt_jap.6.desc
	hidden = yes
	is_triggered_only = yes #this is triggered by war with china
	timeout_days = 1
	picture = GFX_report_event_japanese_parade

	immediate = { #effect applied immediately to avoid cheese
		country_event = {
			id = spt_jap.7
			days = 30
			random_days = 210
		}
	}

	option = { #Warns the player that shit sucks now
		name = spt_jap.6.a
	}
}
#War with china causes increase in eco pressure
country_event = { 
	id = spt_jap.7
	title = spt_jap.7.t
	desc = spt_jap.7.desc
	is_triggered_only = yes #this is triggered by spt_jap.6
	timeout_days = 1
	picture = GFX_report_event_japanese_soldiers_02

	immediate = { #effect applied immediately to avoid cheese
		add_to_variable = {
			var = JAP.spt_jap_cg_increase_tracker
			value = 0.005
		}
		
	}

	option = { #Warns the player that shit sucks now
		name = spt_jap.7.a
		
		custom_effect_tooltip = SPT_JAP_cg_expected_timed_increase_up_tt
		custom_effect_tooltip = SPT_JAP_whitespace_tt
		custom_effect_tooltip = SPT_JAP_zaibatsu_mod_header_tt
		add_to_variable = {
			SPT_JAP_zai_industrial_capacity_factory = 0.05
			tooltip = industrial_capacity_factory_tt
		}
	}
}

# NEWS EVENTS

#kodoha dudes fumble the coup, just like me with the goth girl
news_event = {
	id = spt_jap_news.1
	title = spt_jap_news.1.t
	desc = spt_jap_news.1.d
	picture = GFX_news_event_ger_civil_war
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = spt_jap_news.1.a
		trigger = {
			NOT = {
				TAG = JAP
			}
			OR = { 
				TAG = ENG
				TAG = USA
				TAG = FRA
				TAG = BRA
				TAG = CAN
				TAG = RAJ
				TAG = AST
				TAG = NZL
				TAG = SAF
				TAG = HOL
				TAG = MEX
				TAG = SOV
				TAG = MON
			}
		}
	}
	option = {
		name = spt_jap_news.1.b
		trigger = {
			NOT = {
				TAG = JAP
			}
			NOT = {
				OR = { 
					TAG = ENG
					TAG = USA
					TAG = FRA
					TAG = BRA
					TAG = CAN
					TAG = RAJ
					TAG = AST
					TAG = NZL
					TAG = SAF
					TAG = HOL
					TAG = MEX
					TAG = SOV
					TAG = MON
				}
			}
		}
	}
	option = {
		name = spt_jap_news.1.c
		trigger = {
			TAG = JAP
		}
	}
}

#kodoha dudes succeed the coup
news_event = {
	id = spt_jap_news.2
	title = spt_jap_news.2.t
	desc = spt_jap_news.2.d
	picture = GFX_news_event_japanese_army_parade
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = spt_jap_news.2.a
		trigger = {
			NOT = {
				TAG = JAP
			}
			OR = { 
				TAG = ENG
				TAG = USA
				TAG = FRA
				TAG = BRA
				TAG = CAN
				TAG = RAJ
				TAG = AST
				TAG = NZL
				TAG = SAF
				TAG = HOL
				TAG = MEX
				TAG = SOV
				TAG = MON
			}
		}
	}
	option = {
		name = spt_jap_news.2.b
		trigger = {
			NOT = {
				TAG = JAP
			}
			NOT = {
				OR = { 
					TAG = ENG
					TAG = USA
					TAG = FRA
					TAG = BRA
					TAG = CAN
					TAG = RAJ
					TAG = AST
					TAG = NZL
					TAG = SAF
					TAG = HOL
					TAG = MEX
					TAG = SOV
					TAG = MON
				}
			}
		}
	}
	option = {
		name = spt_jap_news.2.c
		trigger = {
			TAG = JAP
		}
	}
}


# Japan declares war by bombing a navy
news_event = {
	id = spt_jap_news.3
	title = spt_jap_news.3.t
	desc = spt_jap_news.3.d
	picture = GFX_news_event_usa_japan_at_war
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = spt_jap_news.3.a
		trigger = {
			NOT = {
				OR = {
					TAG = JAP
					TAG = RAJ
				}
			}
		}
	}
	option = {
		name = spt_jap_news.3.b
		trigger = {
			TAG = JAP
			not = {
				TAG = RAJ
			}
		}
	}
	option = {
		name = spt_jap_news.3.c
		trigger = {
			TAG = RAJ
		}
	}
}